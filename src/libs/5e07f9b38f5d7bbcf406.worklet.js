class e extends AudioWorkletProcessor{SDK_MONO_BUFFER_SAMPLES=240;SDK_MONO_BUFFER_BYTES=480;SDK_STEREO_BUFFER_SAMPLES=480;SDK_STEREO_BUFFER_BYTES=960;_channelCount;_samplesSize;_bufferSize;_buffer;_bufferView;_bufferIndex=0;constructor(e){super(e),this._channelCount=e?.channelCount?e.channelCount:1,this._samplesSize=1===this._channelCount?this.SDK_MONO_BUFFER_SAMPLES:this.SDK_STEREO_BUFFER_SAMPLES,this._buffer=new Int16Array(this._samplesSize),this._bufferView=new DataView(this._buffer.buffer),this._bufferSize=1===this._channelCount?this.SDK_MONO_BUFFER_BYTES:this.SDK_STEREO_BUFFER_BYTES,this.port.onmessage=this.onMessage}onMessage=e=>{"clear"===e.data&&(this._buffer=new Int16Array(this._samplesSize),this._bufferView=new DataView(this._buffer.buffer))};process(e){if(!e||!e[0]||!e[0][0]||2===this._channelCount&&!e[0][1])return console.log("Early return!"),!0;const s=32767,t=!0;let f=this._bufferIndex;const i=e[0][0].length,r=this._bufferSize;if(2===this._channelCount){const r=e[0][0],_=e[0][1];let n=this._bufferView;for(let e=0;e<i;e++)n.setInt16(f,r[e]*s,t),n.setInt16(f+2,_[e]*s,t),f+=4,f===this._bufferSize&&(this.port.postMessage(this._buffer.buffer,[this._buffer.buffer]),this._buffer=new Int16Array(this._samplesSize),this._bufferView=new DataView(this._buffer.buffer),n=this._bufferView,f=0)}else{const _=e[0][0];let n=this._bufferView;for(let e=0;e<i;e++)n.setInt16(f,_[e]*s,t),f+=2,f===r&&(this.port.postMessage(this._buffer.buffer,[this._buffer.buffer]),this._buffer=new Int16Array(this._samplesSize),this._bufferView=new DataView(this._buffer.buffer),n=this._bufferView,f=0)}return this._bufferIndex=f,!0}}registerProcessor("vircadia-audio-input-processor",e);
//# sourceMappingURL=5e07f9b38f5d7bbcf406.worklet.js.map